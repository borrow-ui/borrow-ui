import { Fragment } from 'react';
import { Meta, Story, Canvas, ArgsTable } from '@storybook/addon-docs/blocks';

import { FormsStoryWrapper } from '../FormsStoryWrapper';
import { Field } from '../field/Field';

import { Dropzone } from './Dropzone';
import { DropzoneFile } from './DropzoneFiles';

<Meta title="Forms/Components/Dropzone" component={Dropzone} />

# Dropzone

Dropzone component is a wrapper around `react-dropzone` library.
It allows to create an upload area which works with both Drag and Drop or classic "click here" browser.

<Canvas>
    <Story name="Default">
        <FormsStoryWrapper initialState={{ full_name: '' }}>
            {({ state, setState }) => {
                return (
                    <div style={{ width: 400 }}>
                        <Field label="Documents">
                            <Dropzone
                                initialFiles={[
                                    { name: 'First file.pdf' },
                                    { name: 'My profile picture.jpg' },
                                ]}
                            />
                        </Field>
                    </div>
                );
            }}
        </FormsStoryWrapper>
    </Story>
</Canvas>

## Customizing messages

The Drop area message can be customized with `dragMessage`.

<Canvas>
    <Story name="Custom Messages">
        <FormsStoryWrapper initialState={{ full_name: '' }}>
            {({ state, setState }) => {
                return (
                    <div style={{ width: 400 }}>
                        <Field label="Documents">
                            <Dropzone
                                dragMessage="Drag the files here and they will be added below"
                                initialFiles={[
                                    { name: 'First file.pdf' },
                                    { name: 'My profile picture.jpg' },
                                ]}
                            />
                        </Field>
                    </div>
                );
            }}
        </FormsStoryWrapper>
    </Story>
</Canvas>

`dragMessage` controls the base message for both active and inactive status. If you need to customize each separately, you can set `dragActiveMessage` and `dragInactiveActiveMessage`:

<Canvas>
    <Story name="Specific Messages">
        <FormsStoryWrapper initialState={{ full_name: '' }}>
            {({ state, setState }) => {
                return (
                    <div style={{ width: 400 }}>
                        <Field label="Documents">
                            <Dropzone
                                dragActiveMessage="Drop the file!"
                                dragInactiveMessage="Drag a file in this zone here"
                                initialFiles={[
                                    { name: 'First file.pdf' },
                                    { name: 'My profile picture.jpg' },
                                ]}
                            />
                        </Field>
                    </div>
                );
            }}
        </FormsStoryWrapper>
    </Story>
</Canvas>

## Maximum number of files

By default, there is no limit on the number of files that can be uploaded.
Sometimes however we need to specify a maximum number, i.e. when we need a single attachment.

This can be done with `maxFiles` property:

<Canvas>
    <Story name="Max Files">
        <FormsStoryWrapper initialState={{ full_name: '' }}>
            {({ state, setState }) => {
                return (
                    <div style={{ width: 400 }}>
                        <Field label="Documents">
                            <Dropzone maxFiles={1} initialFiles={[{ name: 'First file.pdf' }]} />
                        </Field>
                    </div>
                );
            }}
        </FormsStoryWrapper>
    </Story>
</Canvas>

## Dropzone Props

<ArgsTable of={Dropzone} />

## DropzoneFile Props

<ArgsTable of={DropzoneFile} />
